<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width">
    <meta name="author" content="nory">
    <meta name="description"
        content="Building Digital Playground. Human will live a new era, called Online First, Offline Second.">
    <meta name="keywords" content="nory, Social Network, kakaotalk, Digital PlayGround">
    <title>Nory | Digital PlayGround</title>

    <!-- language -->
    <link rel="alternate" hreflang="en" href="https://nory.cc/" />
    <link rel="alternate" hreflang="ko" href="https://nory.cc/ko/" />
    <link rel="alternate" hreflang="x-default" href="https://nory.cc/" />

    <!-- google Adsense meta tags -->
    <script data-ad-client="ca-pub-2637974918704527" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <!-- style -->
    <link rel="stylesheet" href="/assets/css/reset.css">
    <link rel="stylesheet" href="/assets/css/default.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="/assets/css/font-awesome.css">

    <!-- Favicon -->
    <link rel="shortcut icon" sizes="32x32" href="/assets/icons/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/icons/favicon_72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="96x96" href="/assets/icons/favicon_96.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/icons/favicon_144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="192x192" href="/assets/icons/favicon_192.png" />

    <!-- Facebook meta tags -->
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Nory" />
    <meta property="og:url" content="http://nory.cc/index.html" />
    <meta property="og:image" content="http://nory.cc/assets/ico/favicon.png" />
    <meta property="og:site_name" content="Nory.cc" />
    <meta property="og:description"
        content="Building Digital Playground. Human will live a new era, called Online First, Offline Second." />

    <!-- twitter meta tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@nory" />
    <meta name="twitter:title" content="Nory" />
    <meta name="twitter:description"
        content="Building Digital Playground. Human will live a new era, called Online First, Offline Second." />
    <meta property="twitter:image" content="http://nory.cc/assets/ico/favicon.png" />

    <!-- Web Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,500,700,900&amp;subset=korean"
        rel="stylesheet">

</head>

<body>
    <!-- header -->
    <div id="includeheader"></div>
    <!-- //header -->

    <!-- subtitle -->
    <section id="subtitle">
        <div class="container">
            <div class="row">
                <div class="subtitle">
                    <div>
                        <h1>인공지능 감정 분석</h1>
                    </div>
                    <hr>
                    <div>
                        <h2>인공지능이 당신의<br>감정을 읽고 분석합니다.</h2>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- //subtitle -->

    <!-- main -->
    <div class="container">
        <div class="row">
            <div class="file-upload">
                <div class="image-upload-wrap">
                    <form method="post" enctype="multipart/form-data">
                        <input type="file" id="file" class="file-upload-input" onchange="readURL(this);"
                            accept="image/*" />
                    </form>
                    <div class="drag-text">
                        <img src="upload.svg" class="upload">
                        <h3 class="upload-text">얼굴 사진을 올려놓거나 눌러서 업로드 하세요</h3>
                    </div>
                </div>
                <div class="file-upload-content">
                    <img class="file-upload-image" id="face-image" src="#" alt="your image" />
                    <div id="loading" class="animated bounce">
                        <div class="spinner-border" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                        <p class="text-center">AI가 당신의 감정을 분석중입니다.</p>
                    </div>

                    <p class="result-message"></p>

                    <div id="label-container" class="d-flex flex-column justify-content-around"></div>

                    <div class="addthis_inline_share_toolbox_5dp4"></div>

                    <div class="image-title-wrap">
                        <button type="button" onclick="window.location.reload();" class="try-again-btn">
                            <span class="try-again-text">다른 사진으로 재시도</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="kakao_ad_area">
        <ins class="kakao_ad_area_body-pc-mobile-1" style="display:none;" data-ad-unit="DAN-1hux6ibvxki1u"
            data-ad-width="250" data-ad-height="250"></ins>
        <ins class="kakao_ad_area_body-pc-mobile-2" style="display:none;" data-ad-unit="DAN-1jym4dla3zmes"
            data-ad-width="250" data-ad-height="250"></ins>
    </div>

    <!-- //main -->

    <!-- footer -->
    <div id="includefooter"></div>
    <!-- //footer -->

    <!-- JavaScript Library -->
    <script src="/assets/js/jquery-3.5.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="/assets/js/modernizr-custom.js"></script>
    <script src="/assets/js/ie-checker.js"></script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5edf4ff1375b6707"></script>
    <!-- <script src="https://developers.kakao.com/sdk/js/kakao.js"></script> -->

    <script type="text/javascript">
        $(document).ready(function () {
            $("#includeheader").load("/template/header-ko.html")
            $("#includefooter").load("/template/footer.html")
        });
    </script>


    <script>
        function readURL(input) {

            if (input.files && input.files[0]) {

                var reader = new FileReader();
                formData = input.files[0];
                console.log(formData)

                reader.onload = function (e) {
                    $('.image-upload-wrap').hide();
                    $('#loading').show();
                    $('.file-upload-image').attr('src', e.target.result);
                    $('.file-upload-content').show();


                };
                reader.readAsDataURL(input.files[0]);
                init().then(function () {
                    predict();
                    setTimeout(function () {
                        $('#loading').hide();
                        $('.addthis_inline_share_toolbox_5dp4').show();
                    }, 500);
                });

            } else {
                removeUpload();
            }
        }


        function removeUpload() {
            $('.file-upload-input').replaceWith($('.file-upload-input').clone());
            $('.file-upload-content').hide();
            $('.image-upload-wrap').show();
        }
        $('.image-upload-wrap').bind('dragover', function () {
            $('.image-upload-wrap').addClass('image-dropping');
        });
        $('.image-upload-wrap').bind('dragleave', function () {
            $('.image-upload-wrap').removeClass('image-dropping');
        });

    </script>

    <script type="text/javascript">

        async function init() {
            labelContainer = document.getElementById("label-container"); 3
            for (let i = 0; i < 8; i++) { // and class labels
                labelContainer.appendChild(document.createElement("div"));
            }
        }

        async function predict() {
            var subscriptionKey = "45a143a2ab4c492cb5b4d44968648f49";
            var uriBase =
                "https://koreacentral.api.cognitive.microsoft.com/face/v1.0/detect";
            var params = {
                "returnFaceId": "true",
                "returnFaceLandmarks": "false",
                "returnFaceAttributes":
                    "age,gender,headPose,smile,facialHair,glasses,emotion," +
                    "hair,makeup,occlusion,accessories,blur,exposure,noise"
            };

            $.ajax({
                url: uriBase + "?" + $.param(params),
                beforeSend: function (xhrObj) {
                    xhrObj.setRequestHeader("Content-Type", "application/octet-stream");
                    xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key", subscriptionKey);
                },
                type: "POST",
                data: formData,
                processData: false,
                contentType: false
            })

                .done(function (data) {
                    console.log(data);
                    var prediction = data[0].faceAttributes.emotion;
                    var prediction = Object.keys(prediction).map(function (key) {
                        return {
                            className: key, probability: prediction[key]
                        };
                    });

                    prediction.sort(function (a, b) {
                        return parseFloat(b.probability) - parseFloat(a.probability);
                    });

                    console.log(prediction);


                    switch (prediction[0].className) {
                        case "anger":
                            resultTitle = "당신은 '분노'하고 있습니다."
                            resultExplain = "분노의 감정이 발생하는 원인은 모욕, 비교나 상대방에게 무시를 당했을 때 등으로 다양합니다! 분노는 보편적인 인간의 감정이기는 하지만 치미는 분노를 참지 못하고 매번 표출하는 사람은 돌이킬 수 없는 치명적인 실수를 저지르게 될 가능성이 높습니다. 분노를 참아내지 못하거나 혹은 참기만 하고 제대로 표현할 줄 모른다면, 전문가의 도움을 받아보는 것도 좋습니다!"
                            resultCeleb = "해결하는 방법: 숫자세기, 자리피하기, 운동하기, 거울보기"
                            break;
                        case "contempt":
                            resultTitle = "당신은 '경멸'하고 있습니다."
                            resultExplain = "경멸이란 남을 깔보고 업신여기는 감정입니다. 바디랭귀지 전문가들은 다양한 감정중에서도 가장 최악의 감정이 바로 '경멸'이라고 합니다. 경멸은 도덕적 우월감과 연결되는 경우가 많습니다. 타인을 존중해주세요."
                            resultCeleb = "나타나는 특징: 한쪽 입꼬리만 슬쩍올리며 반쯤 웃는듯한 썩소"
                            break;
                        case "disgust":
                            resultTitle = "당신은 '혐오'하고 있습니다."
                            resultExplain = "혐오를 멈춰주세요! 자신에게 해로운 것을 제거하고자 할 때 발생하는 정서를 말합니다. 이때에는 그것을 배설하거나 토하고 싶은 행동을 보입니다. 혐오는 어떠한 것을 증오, 불결함 등의 이유로 싫어하거나 기피하는 감정으로, 불쾌,기피함,싫어함 등의 감정이 복합적으로 이루어진 비교적 강한 감정을 의미합니다!"
                            resultCeleb = "논란: 종교혐오, 성혐오, 국가혐오"
                            break;
                        case "fear":
                            resultTitle = "혹시 '공포'를 느끼고 계신가요?"
                            resultExplain = "자신에게 해로운 것을 제거하고자 할 때 발생하는 정서를 말합니다. 이때에는 그것을 배설하거나 토하고 싶은 행동을 보입니다. 공포로 인하여 불안장애가 발생할 수 있으니 주의하시기 바랍니다."
                            resultCeleb = "종류 : 고소공포증, 광장공포증, 폐쇄공포증, 낯선 곳이나 이방인에 대한 두려움은 제노포비어, 어둠공포증 등."
                            break;
                        case "happiness":
                            resultTitle = "당신은 정말 '행복'해 보입니다."
                            resultExplain = "행복에 대한 가장 인기 있는 정의는 ‘주관적 안녕감’입니다. 안녕이란 평안하다는 의미인데, 즐거움이라기보다는 오히려 특별한 사건이 없는 편안한 상태를 의미합니다. 여기에는 직장, 건강, 가족 등 다양한 분야에서 자기 삶에 대한 만족도가 중요합니다."
                            resultCeleb = "당신의 행복은 주변을 통해 긍정적에너지를 전파합니다."
                            break;
                        case "neutral":
                            resultTitle = "현재 아무 '감흥'도 없어보입니다."
                            resultExplain = "당신은 무슨 생각에 잠겨있거나 멍때리고 있는것 같습니다. 현대인은 머릿속이 너무 복잡해서, 때때로 멍때리는 것이 스트레스 완화에 도움이 된다고 합니다. 당신의 멍때리기를 응원합니다."
                            resultCeleb = "멍때리기 대회 1등 : 가수 크러쉬(Crush)"
                            break;
                        case "sadness":
                            resultTitle = "혹시 슬픈 일이 있으신가요?"
                            resultExplain = "슬픔은 소중했던 뭔가를 잃어버렸을 때 느끼는 상실감의 표현입니다. 혹시 소중한 무언가를 잃어버린것은 아니신가요? 당신 마음속에서 소중한 것들을 떠올려보세요. 당신에게 위로가 되기를 바랍니다."
                            resultCeleb = "슬픔이란 도와 달라는 사회적 신호입니다."
                            break;
                        case "surprise":
                            resultTitle = "혹시 깜짝 놀랄일이 있었나요?"
                            resultExplain = "놀랐을 때 나타나는 얼굴 표정은 두려울 때와 비슷합니다. 사람들은 놀란 표정과 두려운 표정을 단지 사진만 보고 판단하라고 하면 구별 못 하는 경우가 많습니다. 사실 공포와 놀람은 같이 느끼는 경우가 많고, 잘 놀라는 사람일수록 두려움을 더 많이 느낍니다."
                            resultCeleb = "놀람 반응은 0.2초의 짧은 시간에 이루어지는 반사적인 행동입니다."
                            break;
                        default:
                            resultTitle = "알 수 없음"
                            resultExplain = ""
                            resultCeleb = ""
                    }
                    var title = "<div class='" + prediction[0].className + "-animal-title'>" + resultTitle + "</div>"
                    var explain = "<div class='animal-explain pt-2'>" + resultExplain + "</div>"
                    var celeb = "<div class='" + prediction[0].className + "-animal-celeb pt-2 pb-2'>" + resultCeleb + "</div>"
                    $('.result-message').html(title + explain + celeb);
                    var barWidth;
                    for (let i = 0; i < 8; i++) {
                        barWidth = Math.round(prediction[i].probability.toFixed(2) * 100) + "%";

                        var labelTitle;
                        switch (prediction[i].className) {
                            case "anger":
                                labelTitle = "분노"
                                break;
                            case "contempt":
                                labelTitle = "경멸"
                                break;
                            case "disgust":
                                labelTitle = "혐오"
                                break;
                            case "fear":
                                labelTitle = "공포"
                                break;
                            case "happiness":
                                labelTitle = "행복"
                                break;
                            case "neutral":
                                labelTitle = "감흥없음"
                                break;
                            case "sadness":
                                labelTitle = "슬픔"
                                break;
                            case "surprise":
                                labelTitle = "놀람"
                                break;
                            default:
                                labelTitle = "알수없음"
                        }
                        var label = "<div class='animal-label d-flex align-items-center'>" + labelTitle + "</div>"
                        var bar = "<div class='bar-container position-relative'><div class='" + prediction[i].className + "-box'></div><div class='d-flex justify-content-center align-items-center " + prediction[i].className + "-bar' style='width: " + barWidth + "'><span class='d-block percent-text'>" + Math.round(prediction[i].probability.toFixed(2) * 100) + "%</span></div></div>"
                        labelContainer.childNodes[i].innerHTML = label + bar;
                    }

                })


                .fail(function (jqXHR, textStatus, errorThrown) {
                    // Display error message.
                    var errorString = (errorThrown === "") ?
                        "Error. " : errorThrown + " (" + jqXHR.status + "): ";
                    errorString += (jqXHR.responseText === "") ?
                        "" : (jQuery.parseJSON(jqXHR.responseText).message) ?
                            jQuery.parseJSON(jqXHR.responseText).message :
                            jQuery.parseJSON(jqXHR.responseText).error.message;
                    alert(errorString);
                });
        };
    </script>



</body>
<!-- Copyright (c) 2020 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)
    
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
    
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
    
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 -->

</html>